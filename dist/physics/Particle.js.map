{"version":3,"file":"Particle.js","sourceRoot":"","sources":["../../src/physics/Particle.ts"],"names":[],"mappings":"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","sourcesContent":["import { Vec } from '../geom/Vec';\r\nimport { Spring } from './Spring';\r\n\r\nexport class Particle extends Vec {\r\n\tprev: Vec;\r\n\ttemp: Vec;\r\n\tforce: Vec;\r\n\r\n\tmass: number;\r\n\tradius: number = 10;\r\n\r\n\tisLocked: boolean;\r\n\r\n\thasLifespan = false;\r\n\tlifespan: number = 255;\r\n\r\n\thasTrail: boolean = false;\r\n\ttrail = [];\r\n\ttrailLength: number = 10;\r\n\r\n\tsprings: Spring[] = [];\r\n\r\n\t// behaviors;\r\n\r\n\tconstructor(pos: Vec, mass = 1, isLocked = false) {\r\n\t\tsuper(pos);\r\n\t\tthis.prev = this.copy();\r\n\t\tthis.temp = new Vec(0, 0);\r\n\t\tthis.force = new Vec(0, 0);\r\n\r\n\t\tthis.mass = mass;\r\n\t\tthis.isLocked = isLocked;\r\n\r\n\t\t// this.x += (Math.random() * 2 - 1) * 1e-3;\r\n\t\t// this.y += (Math.random() * 2 - 1) * 1e-3;\r\n\t}\r\n\r\n\taddForce(v: Vec) {\r\n\t\tthis.force.addSelf(v);\r\n\t}\r\n\r\n\tclearForce() {\r\n\t\tthis.force.set(0, 0);\r\n\t}\r\n\r\n\t// applyBehaviors() {\r\n\t// \tfor (let behavior of this.behaviors) {\r\n\t// \t\tbehavior.applyBehavior(this);\r\n\t// \t}\r\n\t// }\r\n\r\n\taddVelocity(deltaVel: Vec) {\r\n\t\tthis.prev.subSelf(deltaVel);\r\n\t}\r\n\r\n\tclearVelocity() {\r\n\t\tthis.prev.set(this);\r\n\t}\r\n\r\n\tgetVelocity() {\r\n\t\treturn this.sub(this.prev);\r\n\t}\r\n\r\n\tsetVelocity(vel: Vec) {\r\n\t\tthis.addVelocity(this.getVelocity().scale(-1).add(vel));\r\n\t}\r\n\r\n\tdampen(gamma: number) {\r\n\t\tthis.addVelocity(this.getVelocity().scale(1 - gamma));\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tif (this.isLocked) return;\r\n\r\n\t\t// this.applyBehaviors();\r\n\r\n\t\tthis.temp.set(this);\r\n\t\tthis.addSelf(this.sub(this.prev).addSelf(this.force.scale(this.mass)));\r\n\t\tthis.prev.set(this.temp);\r\n\t\tthis.clearForce();\r\n\t}\r\n\r\n\t// draw() {\r\n\t// \tfill(0, this.lifespan);\r\n\t// \tnoStroke();\r\n\t// \tcircle(this.x, this.y, this.radius * 2);\r\n\r\n\t// \tif (this.isHovered()) {\r\n\t// \t\tconsole.log('hovered!');\r\n\t// \t\tstroke(0, this.lifespan);\r\n\t// \t\tnoFill();\r\n\t// \t\tcircle(this.x, this.y, this.radius * 4);\r\n\t// \t}\r\n\r\n\t// \tif (this.hasTrail) {\r\n\t// \t\tnoFill();\r\n\t// \t\tstroke(255, this.lifespan);\r\n\t// \t\tbeginShape();\r\n\t// \t\tfor (let p of this.trail) {\r\n\t// \t\t\tvertex(p.x, p.y);\r\n\t// \t\t}\r\n\t// \t\tendShape();\r\n\t// \t}\r\n\t// }\r\n\r\n\taddSpring(spring: Spring) {\r\n\t\tthis.springs.push(spring);\r\n\t}\r\n\r\n\t// isHovered(): boolean {\r\n\t// \treturn (\r\n\t// \t\tthis.distanceToSq(new Vec(mouseX, mouseY)) <\r\n\t// \t\tthis.radius * this.radius\r\n\t// \t);\r\n\t// }\r\n}\r\n"]}