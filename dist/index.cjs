'use strict';var x=class{constructor(e,t,i,r=1){this.target=e,this.strength=t,this.radiusSq=i!==void 0?i*i:Number.POSITIVE_INFINITY,this.minDistanceSq=Math.max(r*r,1);}applyBehavior(e){if(e.isLocked||e===this.target)return;let t=this.target.sub(e),i=t.magSq();if(i===0||i>this.radiusSq)return;let r=Math.max(i,this.minDistanceSq),n=this.strength/r,o=t.normalizeTo(n);e.addForce(o);}};var h=class h{constructor(e,t){this.x=0;this.y=0;if(e instanceof h){this.x=e.x,this.y=e.y;return}t!==void 0&&(this.x=e,this.y=t);}set(e,t){return e instanceof h?(this.x=e.x,this.y=e.y,this):t===void 0?this:(this.x=e,this.y=t,this)}add(e){return new h(this.x+e.x,this.y+e.y)}addSelf(e){return this.set(this.add(e)),this}sub(e){return new h(this.x-e.x,this.y-e.y)}subSelf(e){return this.set(this.sub(e)),this}scale(e){return new h(this.x*e,this.y*e)}scaleSelf(e){return this.set(this.scale(e)),this}div(e){return new h(this.x/e,this.y/e)}divSelf(e){return this.set(this.div(e)),this}dot(e){return this.x*e.x+this.y*e.y}magSq(){return this.dot(this)}mag(){return Math.sqrt(this.magSq())}normalize(){let e=this.mag();return e>h.epsilon?this.scale(1/e):new h(0,0)}normalizeSelf(){return this.set(this.normalize()),this}normalizeTo(e){return this.normalize().scale(e)}normalizeToSelf(e){return this.set(this.normalizeTo(e)),this}distanceToSq(e){return this.sub(e).magSq()}distanceTo(e){return this.sub(e).mag()}perp(){return new h(-this.y,this.x)}perpSelf(){return this.set(this.perp()),this}rotate(e){let t=Math.cos(e),i=Math.sin(e);return new h(this.x*t-this.y*i,this.x*i+this.y*t)}rotateSelf(e){return this.set(this.rotate(e)),this}lerp(e,t){return this.scale(1-t).add(e.scale(t))}lerpSelf(e,t){return this.set(this.lerp(e,t)),this}angleTo(e){return h.angleBetween(this,e)}angle(){return Math.atan2(this.y,this.x)}copy(){return new h(this.x,this.y)}toString(){return `(${this.x}, ${this.y})`}projectOnto(e){let t=this.dot(e),i=e.magSq();if(i===0)return new h(0,0);let r=t/i;return e.scale(r)}projectOntoSelf(e){return this.set(this.projectOnto(e)),this}static random2D(){let e=Math.random()*Math.PI*2;return new h(Math.cos(e),Math.sin(e))}static fromAngle(e){return new h(Math.cos(e),Math.sin(e))}static get ZERO(){return new h(0,0)}static get X(){return new h(1,0)}static get Y(){return new h(0,1)}static angleBetween(e,t){let i=e.dot(t),r=e.mag()*t.mag();if(r===0)return 0;let n=i/r;return n<=-1?Math.PI:n>=1?0:Math.acos(n)}static angleFromTo(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}};h.epsilon=1e-4;var s=h;var g=class{constructor(e,t=1){this.bounds={...e},this.restitution=t;}applyBehavior(e){if(e.isLocked)return;let t=this.bounds.x+e.radius,i=this.bounds.x+this.bounds.width-e.radius,r=this.bounds.y+e.radius,n=this.bounds.y+this.bounds.height-e.radius,o=e.getVelocity(),a=false;e.x<t?(e.x=t,o=new s(-o.x*this.restitution,o.y),a=true):e.x>i&&(e.x=i,o=new s(-o.x*this.restitution,o.y),a=true),e.y<r?(e.y=r,o=new s(o.x,-o.y*this.restitution),a=true):e.y>n&&(e.y=n,o=new s(o.x,-o.y*this.restitution),a=true),a&&e.setVelocity(o);}};var V=class{constructor(e){this.force=new s(e);}applyBehavior(e){e.isLocked||e.addForce(this.force);}};var v=class{constructor(e){this.coefficient=e;}applyBehavior(e){if(e.isLocked)return;let t=e.getVelocity(),i=t.magSq();if(i===0)return;let r=this.coefficient*i,n=t.normalizeTo(-r);e.addForce(n);}};var k=class{constructor(e,t){this.staticCoefficient=e,this.kineticCoefficient=t;}applyBehavior(e){if(e.isLocked)return;let t=e.getVelocity(),i=t.mag();if(i===0)return;if(i<this.staticCoefficient){e.clearVelocity();return}let r=t.normalizeTo(-this.kineticCoefficient);e.addForce(r);}};var P=class{constructor(e,t){this.gravitationalConstant=e,this.particles=typeof t=="function"?t:()=>t;}applyBehavior(e){if(!e.isLocked)for(let t of this.particles()){if(t===e)continue;let i=t.sub(e),r=Math.max(i.magSq(),1e-6),n=this.gravitationalConstant*e.mass*t.mass/r,o=i.normalizeTo(n);e.addForce(o);}}};var S=class{constructor(e){this.acc=e;}applyBehavior(e){e.addForce(this.acc.div(e.mass));}};var w=class{constructor(e){this.maxDistance=e;}applyBehavior(e){if(e.isLocked)return;let t=Math.random()*this.maxDistance,i=s.random2D().normalizeTo(t);e.addForce(i);}};var f=class extends s{constructor(t,i=1,r=false){super(t);this.radius=10;this.hasLifespan=false;this.lifespan=255;this.hasTrail=false;this.trail=[];this.trailLength=10;this.springs=[];this.prev=this.copy(),this.temp=new s(0,0),this.force=new s(0,0),this.mass=i,this.isLocked=r;}addForce(t){this.force.addSelf(t);}clearForce(){this.force.set(0,0);}addVelocity(t){this.prev.subSelf(t);}clearVelocity(){this.prev.set(this);}getVelocity(){return this.sub(this.prev)}setVelocity(t){this.addVelocity(this.getVelocity().scale(-1).add(t));}dampen(t){this.addVelocity(this.getVelocity().scale(1-t));}update(){this.isLocked||(this.temp.set(this),this.addSelf(this.sub(this.prev).addSelf(this.force.scale(this.mass))),this.prev.set(this.temp),this.clearForce());}addSpring(t){this.springs.push(t);}};var M=class{constructor(e,t,i){this.accumulator=0;this.isEmitting=true;this.position=new s(e),this.rate=t,this.factory=i;}setPosition(e){this.position.set(e);}setRate(e){this.rate=e;}emit(){return this.factory(new s(this.position))}update(e,t=1){if(this.isEmitting)for(this.accumulator+=this.rate*t;this.accumulator>=1;){let i=this.emit();e.addParticle(i),this.accumulator-=1;}}};var T=class{constructor(e,t){this.position=new s(e),this.radius=t;}setPosition(e){this.position.set(e);}setRadius(e){this.radius=e;}contains(e){return e.distanceToSq(this.position)<=this.radius*this.radius}absorb(e){let t=[];for(let i of e.particles)this.contains(i)||t.push(i);e.particles=t;}};var E=class c{constructor(e,t){this.a=e,this.b=t;}getHeading(){return this.b.sub(this.a)}getDir(){return this.getHeading().normalize()}getLength(){return this.getHeading().mag()}getMidpoint(){return this.a.lerp(this.b,.5)}copy(){return new c(this.a.copy(),this.b.copy())}toString(){return `Line(${this.a.toString()} -> ${this.b.toString()})`}intersectLine(e){let t=this.a.x,i=this.a.y,r=this.b.x,n=this.b.y,o=e.a.x,a=e.a.y,d=e.b.x,m=e.b.y,u=(t-r)*(a-m)-(i-n)*(o-d);if(u===0)return null;let l=((t-o)*(a-m)-(i-a)*(o-d))/u,p=-((t-r)*(i-a)-(i-n)*(t-o))/u;return l>=0&&l<=1&&p>=0&&p<=1?new s(t+l*(r-t),i+l*(n-i)):null}intersectCircle(e){let t=this.getHeading(),i=this.a.sub(e),r=t.magSq(),n=2*i.dot(t),o=i.magSq()-e.radius*e.radius,a=n*n-4*r*o;if(a<0)return [];let d=Math.sqrt(a),m=(-n-d)/(2*r),u=(-n+d)/(2*r),l=[];return m>=0&&m<=1&&l.push(this.a.add(t.scale(m))),u>=0&&u<=1&&l.push(this.a.add(t.scale(u))),l}static fromAngleLength(e,t,i=new s(0,0)){let r=s.fromAngle(e).scale(t),n=i.copy(),o=i.add(r);return new c(n,o)}};var L=class extends s{constructor(e,t){super(e),this.radius=t;}distanceToPoint(e){return this.distanceTo(e)-this.radius}distanceToCircle(e){return this.distanceTo(e)-this.radius-e.radius}};var B=class c{constructor(e,t,i,r){if(e instanceof s&&t instanceof s)this.a=e,this.b=t;else if(typeof e=="number"&&typeof t=="number"&&typeof i=="number"&&typeof r=="number")this.a=new s(e,t),this.b=new s(e+i,t+r);else throw new Error("Invalid constructor arguments for Rect")}get x(){return this.a.x}get y(){return this.a.y}get width(){return this.b.x-this.a.x}get height(){return this.b.y-this.a.y}get area(){return this.width*this.height}containsPoint(e){return e.x>=this.a.x&&e.x<=this.b.x&&e.y>=this.a.y&&e.y<=this.b.y}getCenter(){return this.a.lerp(this.b,.5)}copy(){return new c(this.x,this.y,this.width,this.height)}translate(e,t){return new c(this.x+e,this.y+t,this.width,this.height)}intersects(e){return !(e.b.x<this.a.x||e.a.x>this.b.x||e.b.y<this.a.y||e.a.y>this.b.y)}union(e){let t=Math.min(this.a.x,e.a.x),i=Math.min(this.a.y,e.a.y),r=Math.max(this.b.x,e.b.x),n=Math.max(this.b.y,e.b.y);return new c(new s(t,i),new s(r,n))}intersection(e){let t=Math.max(this.a.x,e.a.x),i=Math.max(this.a.y,e.a.y),r=Math.min(this.b.x,e.b.x),n=Math.min(this.b.y,e.b.y);return r>=t&&n>=i?new c(new s(t,i),new s(r,n)):null}};var I=class{constructor(e,t){this.particles=[];this.hasGravity=false;this.gravity=new s(0,.1);this.hasWind=false;this.wind=new s(.1,0);this.hasFriction=false;this.frictionCoefficient=.1;this.hasDrag=false;this.dragCoefficient=0;this.hasBounce=false;this.bounceCoefficient=.8;this.hasRepulsion=false;this.repulsionStrength=10;this.repulsionRadius=10;this.hasDamping=true;this.damping=.01;this.hasMouseInteraction=true;this.heldParticleIndex=null;this.iters=50;this.timeStep=1/this.iters;this.mouse=new s(0,0);this.isMouseDown=false;this.width=e,this.height=t,document.body.addEventListener("mousemove",i=>{this.mouse.set(i.clientX,i.clientY);}),document.body.addEventListener("mousedown",()=>{this.isMouseDown=true;}),document.body.addEventListener("mouseup",()=>{this.isMouseDown=false;});}addParticle(e){this.particles.indexOf(e)>-1||this.particles.push(e);}updateParticles(){for(let e of this.particles)if(!e.isLocked){if(this.hasGravity&&e.addForce(this.gravity),this.hasFriction){let t=e.getVelocity().scale(-this.frictionCoefficient);e.addForce(t);}if(this.hasDrag){let t=e.getVelocity(),i=t.normalizeTo(-this.dragCoefficient*t.magSq());e.addForce(i);}if(this.hasRepulsion){let t=this.repulsionRadius*this.repulsionRadius;for(let i of this.particles){if(i===e)continue;let r=e.sub(i),n=r.magSq();n<t&&n>0&&(r.normalizeToSelf(this.repulsionStrength/n),e.addForce(r));}}if(this.hasMouseInteraction&&this.heldParticleIndex===null&&this.isMouseDown&&(this.heldParticleIndex=this.particles.indexOf(e)),e.springs!==null)for(let t of e.springs)t.apply();}for(let e of this.particles)if(!e.isLocked&&(e.force.scaleSelf(this.timeStep),this.hasDamping&&e.dampen(this.damping),e.update(),this.hasBounce)){if(e.x<e.radius){e.x=e.radius;let t=e.getVelocity();e.setVelocity(new s(t.x*-this.bounceCoefficient,t.y));}else if(e.x>=this.width-e.radius){e.x=this.width-e.radius;let t=e.getVelocity();e.setVelocity(new s(t.x*-this.bounceCoefficient,t.y));}if(e.y<e.radius){e.y=e.radius;let t=e.getVelocity();e.setVelocity(new s(t.x,t.y*-this.bounceCoefficient));}else if(e.y>=this.height-e.radius){e.y=this.height-e.radius;let t=e.getVelocity();e.setVelocity(new s(t.x,t.y*-this.bounceCoefficient));}}if(this.hasMouseInteraction&&this.heldParticleIndex!==null&&this.isMouseDown){let e=this.particles[this.heldParticleIndex];e?.set(this.mouse),e?.clearVelocity();}}getSprings(){return []}update(){for(let e=0;e<this.iters;e++)this.updateParticles();}};var y=class y{constructor(e,t,i,r){this.damping=.05;this.a=e,this.b=t,this.restLength=i===null?e.distanceTo(t):i,this.k=r,e.addSpring(this),t.addSpring(this);}apply(){let e=this.b.sub(this.a),t=e.mag()-this.restLength;if(Math.abs(t)>y.epsilon){let i=e.normalizeTo(this.k*-t);this.a.addForce(i.scale(-0.5)),this.b.addForce(i.scale(.5));}}};y.epsilon=.01;var b=y;var q=class{constructor(e,t,i,r,n,o){this.particles=[t];let a=r/n,d=i.scale(a),m=t;e.addParticle(t);for(let u=0;u<n;u++){let l=new f(m.add(d));this.particles.push(l),e.addParticle(l),m=l;}for(let u=0;u<this.particles.length-1;u++){let l=this.particles[u],p=this.particles[u+1];new b(l,p,a,o);}}};var C=class{constructor(e){this.defaultStrokeWeight=1;this.defaultParticleSize=5;this.sketch=e;}setDefaultParticleSize(e){this.defaultParticleSize=e;}setDefaultStrokeWeight(e){this.defaultStrokeWeight=e;}push(){this.sketch.push();}pop(){this.sketch.pop();}translate(e,t){this.sketch.translate(e,t);}rotate(e){this.sketch.rotate(e);}scale(e,t){t===void 0?this.sketch.scale(e):this.sketch.scale(e,t);}particle(e,t){let i=t??this.defaultParticleSize;this.sketch.circle(e.position.x,e.position.y,i);}particles(e,t){e.forEach(i=>this.particle(i,t));}spring(e,t=false){if(this.sketch.line(e.a.position.x,e.a.position.y,e.b.position.x,e.b.position.y),t){let i=e.a.position.copy().add(e.b.position).scale(.5),r=Math.atan2(e.b.position.y-e.a.position.y,e.b.position.x-e.a.position.x);this.sketch.push(),this.sketch.translate(i.x,i.y),this.sketch.rotate(r),this.sketch.strokeWeight(.5),this.sketch.stroke(255,0,0,100),this.sketch.line(-e.restLength/2,0,e.restLength/2,0),this.sketch.pop();}}springs(e,t=false){e.forEach(i=>this.spring(i,t));}vector(e,t,i=1,r=5){let n=e.copy().add(t.copy().scale(i));this.arrow(e,n,r);}arrow(e,t,i=5){this.sketch.line(e.x,e.y,t.x,t.y);let r=Math.atan2(t.y-e.y,t.x-e.x);this.sketch.push(),this.sketch.translate(t.x,t.y),this.sketch.rotate(r),this.sketch.line(0,0,-i,-i/2),this.sketch.line(0,0,-i,i/2),this.sketch.pop();}line(e,t,i,r){e instanceof s&&t instanceof s?this.sketch.line(e.x,e.y,t.x,t.y):typeof e=="number"&&typeof t=="number"&&i!==void 0&&r!==void 0&&this.sketch.line(e,t,i,r);}circle(e,t,i){e instanceof s?this.sketch.circle(e.x,e.y,t*2):typeof e=="number"&&i!==void 0&&this.sketch.circle(e,t,i*2);}ellipse(e,t,i,r){e instanceof s?this.sketch.ellipse(e.x,e.y,t,i):typeof e=="number"&&r!==void 0&&this.sketch.ellipse(e,t,i,r);}rect(e,t,i,r){e instanceof s?this.sketch.rect(e.x,e.y,t,i):typeof e=="number"&&r!==void 0&&this.sketch.rect(e,t,i,r);}point(e,t){e instanceof s?this.sketch.point(e.x,e.y):typeof e=="number"&&t!==void 0&&this.sketch.point(e,t);}polygon(e){e.length<3||(this.sketch.beginShape(),e.forEach(t=>this.sketch.vertex(t.x,t.y)),this.sketch.endShape(this.sketch.CLOSE));}polyline(e){e.length<2||(this.sketch.beginShape(),e.forEach(t=>this.sketch.vertex(t.x,t.y)),this.sketch.endShape());}curve(e,t=0){e.length<4||(this.sketch.curveTightness(t),this.sketch.beginShape(),e.forEach(i=>this.sketch.curveVertex(i.x,i.y)),this.sketch.endShape());}bezier(e,t,i,r){this.sketch.bezier(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y);}grid(e,t,i,r=0,n=0){this.sketch.push(),this.sketch.strokeWeight(.5);for(let o=r%e;o<t;o+=e)this.sketch.line(o,0,o,i);for(let o=n%e;o<i;o+=e)this.sketch.line(0,o,t,o);this.sketch.pop();}crosshair(e,t=10){this.sketch.line(e.x-t,e.y,e.x+t,e.y),this.sketch.line(e.x,e.y-t,e.x,e.y+t);}text(e,t,i){i?(this.sketch.push(),i.horizontal==="center"?this.sketch.textAlign(this.sketch.CENTER,this.sketch.CENTER):i.horizontal==="right"?this.sketch.textAlign(this.sketch.RIGHT):i.vertical==="center"?this.sketch.textAlign(this.sketch.LEFT,this.sketch.CENTER):i.vertical==="top"?this.sketch.textAlign(this.sketch.LEFT,this.sketch.TOP):i.vertical==="bottom"&&this.sketch.textAlign(this.sketch.LEFT,this.sketch.BOTTOM),this.sketch.text(e,t.x,t.y),this.sketch.pop()):this.sketch.text(e,t.x,t.y);}};exports.AttractBehavior=x;exports.BounceBehavior=g;exports.Circle=L;exports.ConstantForceBehavior=V;exports.DragBehavior=v;exports.FrictionBehavior=k;exports.GFX=C;exports.GravitationBehavior=P;exports.GravityBehavior=S;exports.JitterBehavior=w;exports.Line=E;exports.Particle=f;exports.ParticleEmitter=M;exports.ParticleSink=T;exports.PhysicsEngine=I;exports.Rect=B;exports.Spring=b;exports.SpringChain=q;exports.Vec=s;//# sourceMappingURL=index.cjs.map
//# sourceMappingURL=index.cjs.map